copyright 2021 Oleksandr Chastukhin

the question:
how does the traffic go from the webrowser through router and dns server?

jargon:
WAN (ang. Wide Area Network)
IPS Intrusion Prevention Systems


the answer:
* we have a computer that works inside the local network.
* if the computer connected with wifi, as a rule, wifi router (or any other device) will give the computer own ip address with dhcp protocol.
* moreover we have configured IP, gateway, DNS server, network mask, MAC address
* in this scenario the gateway is the address of router
* a user opens the browser and goes to the website
* the webbrowser needs to know what is ip address of the website
* DNS cache of OS will be asked if it already/still remember the address of website and if it does, the browser will establish a connection to the known ip address
* and if it donsn't then "The home router is a DNS server, but it is also dependent on other DNS servers on the Internet. The home router can’t know every single DNS address on the Internet. Instead, it will ask those DNS servers that are responsible for different domains"
* "The home router also has a DNS cache just like the computer"
* then the router will send the DNS packet to the next hop router till it the DNS that knows the ip address will be found
* when the suitable DNS server is found, it will responce with the ip address of website as follows:
hop DNS server ---> internet ---> WAN router --- > home router ---> computer
* WAN router and the home router are in the same subnetwork
* "Now after receiving the DNS reply from the DNS server, the home router can finally create a DNS reply and send it to the computer to let the computer know which IP address" of website
* " the computer will initialise something called a “TCP 3-way Handshake” which is a setup phase of TCP communication that consists of three messages between the computer and the server" of website
* "Once the TCP session is established by the OS then the OS will let the Web Browser know that it is now alright for it to start communicating with the Web Server. The web browser will do this by using the HTTP protocol"




https://www.homenethowto.com/advanced-topics/traffic-example-the-full-picture/